% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/07_final_processing.R
\name{final_processing}
\alias{final_processing}
\title{Prepare Diagnostic and Sequencing REDCap Forms}
\usage{
final_processing(
  mydata,
  dictUrl =
    "https://raw.githubusercontent.com/RAGE-toolkit/rage-redcap/main/data_dictionaries/RAGEredcap_DataDictionary.csv",
  fallbackPath = system.file("extdata", "RABVlab_DataDictionary.csv", package =
    "rabvRedcapProcessing")
)
}
\arguments{
\item{mydata}{A data frame with cleaned lab records. Must include \code{sample_id},
\code{duplicate_id}, and \code{country}.}

\item{dictUrl}{A URL to the data dictionary CSV file (defaults to RAGE GitHub).}

\item{fallbackPath}{Local fallback path, typically via \code{system.file()}.}
}
\value{
A named list with:
\describe{
\item{diagnostic_form}{Tibble ready for REDCap import into the diagnostic form.}
\item{sequencing_form}{Tibble ready for REDCap import into the sequencing form.}
}
}
\description{
Processes cleaned lab data into two REDCap-ready tibbles:
\code{diagnostic_form} and \code{sequencing_form}. Access group is inferred
per row from the \code{country} column via \code{\link{infer_access_group}}:
Kenya/Uganda/Tanzania â†’ "east_africa"; Malawi/Nigeria/Peru/Philippines map to
themselves. Unrecognised countries get NA.
}
\details{
By default, the function loads the project dictionary from the RAGE GitHub
(raw CSV). If that URL is unavailable, it falls back to an internal CSV bundled
with the package. You may also provide a custom dictionary URL or file path.

Uses \code{\link{get_redcap_form_columns}} to obtain expected field sets.
Ensures repeat instrument fields are present and fills blanks with "" as
expected by REDCap imports.
}
\examples{
\dontrun{
processed <- final_processing(mydata = cleaned_data)
write.csv(processed$diagnostic_form, "diagnostic_form.csv", row.names = FALSE)
write.csv(processed$sequencing_form, "sequencing_form.csv", row.names = FALSE)
}

}
