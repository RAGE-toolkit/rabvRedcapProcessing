% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/07_final_processing.R
\name{final_processing}
\alias{final_processing}
\title{Prepare Diagnostic and Sequencing REDCap Forms}
\usage{
final_processing(
  mydata,
  dictPath,
  access_group = c("east_africa", "malawi", "nigeria", "peru", "philippines")
)
}
\arguments{
\item{mydata}{A data frame containing cleaned lab records. Must include a \code{sample_id} column and a \code{duplicate_id} column for repeat instance tracking.}

\item{dictPath}{File path to the REDCap data dictionary (CSV format).}

\item{access_group}{A string specifying the REDCap Data Access Group. Must be one of:
\code{"east_africa"}, \code{"malawi"}, \code{"nigeria"}, \code{"peru"}, \code{"philippines"}.}
}
\value{
A named list with two tibbles:
\describe{
\item{diagnostic_form}{A data frame ready for REDCap import into the \code{diagnostic} repeat instrument.}
\item{sequencing_form}{A data frame ready for REDCap import into the \code{sequencing} repeat instrument.}
}
}
\description{
This function processes cleaned laboratory data and splits it into two REDCap-ready data frames:
one for the \code{diagnostic} form and one for the \code{sequencing} form. It assigns REDCap metadata
fields like \code{redcap_repeat_instrument}, \code{redcap_repeat_instance}, and \code{redcap_access_group}.
It ensures all necessary fields exist based on the data dictionary and fills missing values with empty strings.
}
\details{
This function internally calls \code{\link{get_redcap_form_columns}} to determine which variables belong to each form.
It assigns \code{redcap_repeat_instance} from the \code{duplicate_id} column, and sets the repeat instrument name accordingly.
Blank values are replaced with empty strings, as expected by REDCap for import.
}
